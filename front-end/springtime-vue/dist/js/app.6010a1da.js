(function(e){function t(t){for(var n,a,c=t[0],i=t[1],l=t[2],d=0,f=[];d<c.length;d++)a=c[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);u&&u(t);while(f.length)f.shift()();return r.push.apply(r,l||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],n=!0,c=1;c<s.length;c++){var i=s[c];0!==o[i]&&(n=!1)}n&&(r.splice(t--,1),e=a(a.s=s[0]))}return e}var n={},o={app:0},r=[];function a(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=n,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(s,n,function(t){return e[t]}.bind(null,n));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=i;r.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"034f":function(e,t,s){"use strict";s("85ec")},"0968":function(e,t,s){},2125:function(e,t,s){},"2c2c":function(e,t,s){},"3eb7":function(e,t,s){"use strict";s("0968")},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("2b0e"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("logo"),e.isAuthorized?s("basic",{attrs:{accessToken:e.sessionStorage.accessToken,refreshToken:e.sessionStorage.refreshToken},on:{"update:accessToken":e.updateAccess,"update:refreshToken":e.updateRefresh}}):s("startup",{on:{"update:accessToken":e.updateAccess,"update:refreshToken":e.updateRefresh}})],1)},r=[],a=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},c=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"logo"}},[s("h3",[e._v("dots among the area")]),s("hr")])}],i=(s("c5b8"),s("2877")),l={},u=Object(i["a"])(l,a,c,!1,null,null,null),d=u.exports,f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"startup"}},[s("hat"),s("loging",{on:{"update:accessToken":e.updateAccess,"update:refreshToken":e.updateRefresh}})],1)},p=[],h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"hat"}},[e._l(e.authors,(function(e){return[s("author",{attrs:{name:e.name,surname:e.surname,group:e.group,variant:e.variant,imageURL:e.imageURL,profileLink:e.profileLink}})]}))],2)},g=[],v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"author"}},[s("a",{attrs:{href:e.profileLink}},[s("div",{staticClass:"author-info"},[s("h3",{staticClass:"text__title"},[e._v(e._s(e.name)+" "+e._s(e.surname))]),s("h4",{staticClass:"text__subtitle"},[e._v("группа: "+e._s(e.group)+" вариант: "+e._s(e.variant))])]),s("div",{staticClass:"author-logo"},[s("img",{attrs:{src:e.imageURL,width:"120"}})])])])},m=[],k={name:"author",props:["name","surname","group","variant","imageURL","profileLink"]},b=k,_=(s("d487"),Object(i["a"])(b,v,m,!1,null,null,null)),y=_.exports,x={name:"hat",data:function(){return{authors:[{name:"Ленар",surname:"Ханнанов",group:"P3214",variant:"2599",imageURL:"https://avatars0.githubusercontent.com/u/55162739?s=400&u=3c4b18db132cb3f15d9ce43fd39b40ffcc72949c&v=4",profileLink:"https://github.com/Come1LLF00"},{name:"Антон",surname:"Сушкевич",group:"P3214",variant:"2599",imageURL:"https://avatars3.githubusercontent.com/u/58341402?s=400&u=16c83f565161eab46f41869a47fa1e71565ac53d&v=4",profileLink:"https://github.com/Leargy"}]}},components:{author:y}},T=x,w=(s("c021"),Object(i["a"])(T,h,g,!1,null,null,null)),O=w.exports,j=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"loging"}},[s("form",{attrs:{id:"login-form"}},[s("fieldset",[s("label",[e._v("логин")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.login,expression:"user.login"}],attrs:{type:"text",placeholder:"имя пользователя",title:"имя пользователя",required:"true",autocomplete:"username"},domProps:{value:e.user.login},on:{input:function(t){t.target.composing||e.$set(e.user,"login",t.target.value)}}})]),s("fieldset",[s("label",[e._v("пароль")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{type:"password",placeholder:"пароль",title:"пароль",required:"true",autocomplete:"current-password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})]),s("fieldset",{staticClass:"separated"},[s("button",{staticClass:"btn",attrs:{title:"Кнопка для входа в существующий аккаунт"},on:{click:e.signin}},[e._v("Войти")]),s("button",{staticClass:"btn",attrs:{title:"Кнопка для создания нового аккаунта"},on:{click:e.signup}},[e._v("Зарегистрироваться")])])])])},$=[],C=(s("d3b7"),s("96cf"),s("1da1")),S={name:"loging",data:function(){return{user:{login:"",password:""}}},methods:{signin:function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(t){var s,n,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("sign in account:"),console.log("user: ".concat(this.user)),e.next=4,fetch("api/aunt/sign_in",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(this.user)});case 4:s=e.sent,console.log("check if response is ok (200)"),s.ok&&(console.log("response 200; get token"),n=s.json(),console.log("response body: ".concat(n)),n?(o=n.accessToken,r=n.refreshToken,console.log("get user access-token: ".concat(o)),console.log("get user refresh-token: ".concat(r)),console.log("invokating tokens change"),this.$emit("update:accessToken",o),this.$emit("update:refreshToken",r)):console.log("bad data: expected { accessToken, refreshToken }"));case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),signup:function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(t){var s,n,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("sign up new account:"),console.log("user: ".concat(this.user)),e.next=4,fetch("api/aunt/register",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(this.user)});case 4:s=e.sent,console.log("sent request"),console.log("check if status 201"),201===s.status&&(console.log("user created"),n=s.json(),console.log("response body: ".concat(n)),n?(o=n.accessToken,r=n.refreshToken,console.log("get user access-token: ".concat(o)),console.log("get user refresh-token: ".concat(r)),console.log("invokating tokens change"),this.$emit("update:accessToken",o),this.$emit("update:refreshToken",r)):console.log("bad data: expected { accessToken, refreshToken }"));case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},R=S,L=(s("3eb7"),Object(i["a"])(R,j,$,!1,null,null,null)),N=L.exports,P={name:"startup",components:{hat:O,loging:N},methods:{updateAccess:function(e){this.$emit("update:accessToken",e)},updateRefresh:function(e){this.$emit("update:refreshToken",e)}}},E=P,A=Object(i["a"])(E,f,p,!1,null,null,null),q=A.exports,M=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"basic"}},[s("div",{attrs:{id:"form-container"}},[s("h4",{staticClass:"text__title"},[e._v("Форма")]),s("form",{attrs:{id:"result"}},[s("fieldset",{ref:"x",attrs:{title:"Значение параметра x должно быть целым числом в пределах -4 до 4"}},[s("label",[e._v("x")]),s("select",{directives:[{name:"model",rawName:"v-model",value:e.result.x,expression:"result.x"}],attrs:{required:"true"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.result,"x",t.target.multiple?s:s[0])}}},e._l(e.xValues,(function(t){return s("option",[e._v(e._s(t))])})),0)]),s("fieldset",{ref:"y",attrs:{title:"Значение параметра y должно быть действительным число в интервале от -5 до 5"}},[s("label",[e._v("y")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.result.y,expression:"result.y"}],attrs:{type:"text",placeholder:"y in (-5, 5)",required:"true"},domProps:{value:e.result.y},on:{input:function(t){t.target.composing||e.$set(e.result,"y",t.target.value)}}})]),s("fieldset",{ref:"r",attrs:{title:"Значение параметра r должно быть целым числом в пределах от 1 до 4"}},[s("label",[e._v("r")]),s("select",{directives:[{name:"model",rawName:"v-model",value:e.result.r,expression:"result.r"}],attrs:{required:"true"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.result,"r",t.target.multiple?s:s[0])}}},e._l(e.xValues,(function(t){return s("option",[e._v(e._s(t))])})),0)]),s("fieldset",{staticClass:"separated"},[s("button",{staticClass:"btn",on:{click:function(t){return t.preventDefault(),e.check(t)}}},[e._v("проверить")])])])]),s("div",{attrs:{id:"area-container"}},[s("canvas",{ref:"area",attrs:{id:"area",width:"500",height:"500"},on:{click:function(e){}}},[e._v(" Canvas not supported ")])]),e.isLoading?s("loader"):e.results.length?s("resultscontainer",{attrs:{results:e.results}}):s("p",{staticClass:"empty-results"},[e._v("результаты отсутствуют")]),s("div",{attrs:{id:"close-container"}},[s("button",{staticClass:"btn",on:{click:e.signout}},[e._v("закрыть сессию")])])],1)},V=[],J=(s("99af"),s("caad"),s("a9e3"),s("35b3"),s("2532"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"resultscontainer"}},[s("table",{attrs:{id:"results"}},[e._m(0),s("tbody",{staticClass:"table__body"},e._l(e.results,(function(t){return s("tr",[s("td",[s("div",{staticClass:"scrollable"},[e._v(e._s(t.date.toLocaleString("ru",e.options)))])]),s("td",[s("div",{staticClass:"scrollable"},[e._v(e._s(t.time))])]),s("td",[s("div",{staticClass:"scrollable"},[e._v(e._s(t.x))])]),s("td",[s("div",{staticClass:"scrollable special-width"},[e._v(e._s(t.y))])]),s("td",[s("div",{staticClass:"scrollable"},[e._v(e._s(t.r))])]),s("td",[s("div",{staticClass:"scrollable"},[e._v(e._s(t.hit?"yes":"no"))])])])})),0)])])}),U=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",{staticClass:"table__head"},[s("tr",[s("th",[e._v("дата")]),s("th",[e._v("время")]),s("th",[e._v("x")]),s("th",[e._v("y")]),s("th",[e._v("r")]),s("th",[e._v("результат")])])])}],z={name:"resultscontainer",props:["results"],data:{options:{era:"long",year:"numeric",month:"long",day:"numeric",weekday:"long",timezone:"UTC",hour:"numeric",minute:"numeric",second:"numeric"}}},F=z,I=(s("ebbf"),Object(i["a"])(F,J,U,!1,null,null,null)),X=I.exports,Y=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},D=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"loader"}},[s("div",{staticClass:"lds-facebook"},[s("div"),s("div"),s("div")])])}],B=(s("f482"),{}),G=Object(i["a"])(B,Y,D,!1,null,null,null),H=G.exports,K=["1","2","3","4"],Q={name:"basic",props:["accessToken","refreshToken"],components:{resultscontainer:X,loader:H},data:function(){return{rValues:K,xValues:["-4","-3","-2","-1","0"].concat(K),yMinimal:"-5",yMaximum:"5",result:{x:"",y:"",r:""},results:[],isLoading:!0}},methods:{basedraw:function(){},redraw:function(e){},testX:function(e){return console.log("x values: ".concat(this.xValues)),this.xValues.includes(e)},testY:function(e){var t=/^[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?$/,s=parseFloat(e);console.log("parsed value: ".concat(s));var n=t.test(e);console.log("float?: ".concat(n)),console.log("not NaN?: ".concat(!isNaN(s)));var o=s<=this.yMaximum-Number.EPSILON;console.log("less?: ".concat(o));var r=s>=this.yMinimal+Number.EPSILON;return console.log("more?: ".concat(r)),n&&!isNaN(s)&&o&&r},testR:function(e){return console.log("r values: ".concat(this.rValues)),this.rValues.includes(e)},fetchToken:function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(t){var s,n,o,r,a,c,i,l=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("current access-token expired: ".concat(this.accessToken)),console.log("fetching new one"),e.next=4,fetch("/api/refresh/token",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(this.refreshToken)});case 4:if(s=e.sent,console.log("check if response is ok"),s.ok)if(console.log("successful fetching new tokens"),console.log("getting json object"),n=s.json(),n)console.log("empty response body");else{for(console.log("fetched from backend ".concat(n)),o=n.refreshToken,console.log("get refresh token: ".concat(o)),r=n.accessToken,console.log("get access token: ".concat(r)),this.$emit("update:refreshToken",o),this.$emit("update:accessToken",r),t=t.bind(this),a=l.length,c=new Array(a>1?a-1:0),i=1;i<a;i++)c[i-1]=l[i];t(c)}else console.log("bad response");case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),check:function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(t){var s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s="",console.log("--- x testing ---"),this.testX(this.result.x)||(s+=this.$refs.x.title+";\n"),console.log("--- y testing ---"),this.testY(this.result.y)||(s+=this.$refs.y.title+";\n"),console.log("--- r testing ---"),this.testR(this.result.r)||(s+=this.$refs.r.title+";\n"),console.log("=== total testing ==="),!s.length){e.next=13;break}console.log("Errors[".concat(s.length,"]: ").concat(s)),alert(s),e.next=22;break;case 13:return console.log("provided valid data"),console.log("sending ".concat(this.result)),console.log("sending data..."),e.next=18,fetch("/main/app/add",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",shell_token:this.accessToken},body:JSON.stringify(this.result)});case 18:n=e.sent,console.log("request sent checking if response is ok (201)"),201===n.status?console.log("response is ok (201)"):403===n.status?(console.log("access token expired"),this.fetchToken(this.check,t)):console.log("bad response"),console.log("response status: ".concat(n.status));case 22:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),signout:function(e){console.log("close current session..."),this.$emit("update:accessToken",""),this.$emit("update:refreshToken","")},retrieve:function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("getting results with unique token"),e.next=3,fetch("/main/app/dots/all",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",shell_token:this.accessToken},body:JSON.stringify(this.accessToken)});case 3:t=e.sent,console.log("check if response is ok"),t.ok?(console.log("response is ok"),console.log("getting the json object"),s=t.json(),this.results=s):403===t.status?(console.log("access token expired"),this.fetchToken(this.retrieve)):(console.log("bad response"),console.log("response status: ".concat(t.status)),this.results=[]),this.isLoading=!1;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){this.retrieve()}},W=Q,Z=(s("61e5"),Object(i["a"])(W,M,V,!1,null,null,null)),ee=Z.exports,te={name:"app",components:{logo:d,startup:q,basic:ee},data:function(){return{sessionStorage:{accessToken:"",refreshToken:""}}},methods:{updateAccess:function(e){this.sessionStorage.accessToken=e},updateRefresh:function(e){this.sessionStorage.refreshToken=e}},computed:{isAuthorized:function(){return!(void 0===this.sessionStorage.accessToken||null===this.sessionStorage.accessToken||""===this.sessionStorage.accessToken)}}},se=te,ne=(s("034f"),Object(i["a"])(se,o,r,!1,null,null,null)),oe=ne.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(oe)}}).$mount("#app")},"61e5":function(e,t,s){"use strict";s("2c2c")},"6d0b":function(e,t,s){},"85ec":function(e,t,s){},c021:function(e,t,s){"use strict";s("e0ca")},c5b8:function(e,t,s){"use strict";s("6d0b")},d487:function(e,t,s){"use strict";s("2125")},def8:function(e,t,s){},e0ca:function(e,t,s){},ebbf:function(e,t,s){"use strict";s("fe67")},f482:function(e,t,s){"use strict";s("def8")},fe67:function(e,t,s){}});
//# sourceMappingURL=app.6010a1da.js.map